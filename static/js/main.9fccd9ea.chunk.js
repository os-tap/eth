(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{236:function(e,t,n){},238:function(e,t,n){},253:function(e,t){},255:function(e,t){},257:function(e,t){},261:function(e,t){},288:function(e,t){},290:function(e,t){},299:function(e,t){},301:function(e,t){},311:function(e,t){},313:function(e,t){},434:function(e,t){},436:function(e,t){},443:function(e,t){},444:function(e,t){},537:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"buf2hex",(function(){return K})),n.d(a,"hex2buf",(function(){return M})),n.d(a,"serialize_form",(function(){return L})),n.d(a,"serialize_forms",(function(){return F})),n.d(a,"deserialize_form",(function(){return B})),n.d(a,"deserialize_forms",(function(){return G}));var r=n(0),c=n.n(r),i=n(36),s=n.n(i),u=(n(236),n(28)),o=n(12),l=n.n(o),b=n(22),p=n(19),f=(n(238),n(549)),d=n(546),j=n(548),h=n(547),m=n(551),x=n(550),y=(n(239),n(8)),v=n(11),O=n(21),k=n(45),w=Object(k.a)("key"),g=Object(k.a)("counter"),C=function(){function e(){Object(y.a)(this,e),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:new Uint8Array(16)})}return Object(v.a)(e,[{key:"is_valid",value:function(){return Object(O.a)(this,w)[w]instanceof window.CryptoKey}},{key:"generate",value:function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.a)(this,g)[g],e.next=3,window.crypto.subtle.generateKey({name:"AES-CTR",counter:t,length:256},!0,["encrypt","decrypt"]);case 3:Object(O.a)(this,w)[w]=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"import",value:function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.crypto.subtle.importKey("raw",t,"AES-CTR",!0,["encrypt","decrypt"]);case 3:Object(O.a)(this,w)[w]=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.exportKey("raw",Object(O.a)(this,w)[w]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"encryptMessage",value:function(){var e=Object(b.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.a)(this,g)[g],e.next=3,window.crypto.subtle.encrypt({name:"AES-CTR",counter:n,length:64},Object(O.a)(this,w)[w],(new TextEncoder).encode(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decryptMessage",value:function(){var e=Object(b.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.a)(this,g)[g],e.next=3,window.crypto.subtle.decrypt({name:"AES-CTR",counter:n,length:64},Object(O.a)(this,w)[w],t);case 3:return a=e.sent,e.abrupt("return",(new TextDecoder).decode(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"data",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"gets",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"val",type:"uint256"}],name:"sets",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"store",outputs:[],stateMutability:"nonpayable",type:"function"}],P=n(225),S=n.n(P),N=Object(k.a)("web3"),E=Object(k.a)("contract"),T=Object(k.a)("account"),A=Object(k.a)("provider"),I=function(){function e(t){Object(y.a)(this,e),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object(O.a)(this,A)[A]=t,Object(O.a)(this,N)[N]=new S.a(Object(O.a)(this,A)[A]),Object(O.a)(this,E)[E]=new(Object(O.a)(this,N)[N].eth.Contract)(_,"0xC9b4c2Ce6cFa2cda9ff8b6Acd771018Fde84d8cA")}return Object(v.a)(e,[{key:"check_metamask",value:function(){return"undefined"!==typeof Object(O.a)(this,A)[A]}},{key:"set_account",value:function(e){Object(O.a)(this,T)[T]=e}},{key:"init_metamask",value:function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(this,A)[A].request({method:"eth_requestAccounts"});case 2:return(t=e.sent).length&&(Object(O.a)(this,T)[T]=t[0]),e.abrupt("return",t.length>0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(Object(O.a)(this,T)[T]),e.next=3,Object(O.a)(this,E)[E].methods.store(t).send({from:Object(O.a)(this,T)[T]});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(this,E)[E].methods.data(Object(O.a)(this,T)[T]).call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function K(e){return"0x"+Object(u.a)(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function M(e){return new Uint8Array(e.match(/[\da-f]{2}/gi).map((function(e){return parseInt(e,16)}))).buffer}function L(e){return Object.values(Object.fromEntries(e)).join(";")}function F(e){return e.forEach((function(e){return L(e)})).join("/")}function B(e){return e.split(";")}function G(e){return e.split("/").forEach(B)}var R=n(1);function V(e){var t=e.pass,n=e.index,a=e.removePass,r=e.makeVisible,i=e.makeEditable,s=c.a.useState("copy"),u=Object(p.a)(s,2),o=u[0],x=u[1];function y(){return(y=Object(b.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t.pass);case 2:x("copied!");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(R.jsx)(f.a,{children:Object(R.jsx)(f.a.Group,{children:Object(R.jsxs)("div",{className:"row align-items-end",children:[Object(R.jsxs)("div",{className:"col",children:[0==n&&Object(R.jsx)(f.a.Label,{children:"Site"}),Object(R.jsx)(f.a.Control,{disabled:t.edit,readOnly:t.edit,defaultValue:t.site,type:"text",className:"input form-control-plaintext",onChange:function(e){return t.site=e.target.value}})]}),Object(R.jsxs)("div",{className:"col",children:[0==n&&Object(R.jsx)(f.a.Label,{children:"Login"}),Object(R.jsx)(f.a.Control,{disabled:t.edit,readOnly:t.edit,defaultValue:t.login,type:"text",className:"input form-control-plaintext",onChange:function(e){return t.login=e.target.value}})]}),Object(R.jsxs)("div",{className:"col",children:[0==n&&Object(R.jsx)(f.a.Label,{children:"Pass"}),Object(R.jsx)(f.a.Control,{disabled:t.edit,readOnly:t.edit,defaultValue:t.pass,type:t.visible?"text":"password",className:"input form-control-plaintext",onChange:function(e){return t.pass=e.target.value}})]}),Object(R.jsx)("div",{className:"col removeBtn-col",children:Object(R.jsxs)(d.a,{children:[Object(R.jsx)(j.a,{placement:"bottom",onExited:function(){return x("copy")},overlay:Object(R.jsx)(h.a,{children:o}),children:Object(R.jsx)(m.a,{onClick:function(e){return y.apply(this,arguments)},children:"\ud83d\udccb"})}),Object(R.jsx)(j.a,{placement:"bottom",overlay:Object(R.jsx)(h.a,{children:"show"}),children:Object(R.jsx)(m.a,{onClick:function(){return r(n)},children:"\ud83d\udc41"})}),Object(R.jsx)(j.a,{placement:"bottom",overlay:Object(R.jsx)(h.a,{children:"edit"}),children:Object(R.jsx)(m.a,{onClick:function(){return i(n)},children:"\u270d"})}),Object(R.jsx)(j.a,{placement:"bottom",overlay:Object(R.jsx)(h.a,{children:"delete"}),children:Object(R.jsx)(m.a,{onClick:function(){return a(n)},children:"\u274c"})})]})})]})})})}function z(e){var t=e.keygen,n=e.fetch_blockckain,r=c.a.useState(""),i=Object(p.a)(r,2),s=i[0],u=i[1],o=c.a.useState(!1),d=Object(p.a)(o,2),j=d[0],h=d[1];function x(){return(x=Object(b.a)(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.localStorage.getItem("ak")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.import(M(a));case 5:if(!(r=e.sent)){e.next=11;break}return u(a),console.log("key_fetch"),e.next=11,n();case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.a.useEffect((function(){console.log("key_use_effect"),function(){x.apply(this,arguments)}()}),[]);var y=function(){var e=Object(b.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),"generate-key"!=(r=n.nativeEvent.submitter.name)){e.next=16;break}if(s&&!window.confirm("Existing data will be lost! If you dont know key, you will not be able to restore data from blockchain")){e.next=14;break}return e.next=6,t.generate();case 6:return e.t0=a,e.next=9,t.export();case 9:e.t1=e.sent,c=e.t0.buf2hex.call(e.t0,e.t1),u(c),h(!1),window.localStorage.setItem("ak",c);case 14:e.next=26;break;case 16:if("import-key"!=r){e.next=26;break}if(s){e.next=21;break}window.alert("Type aes 256 bit key in hex!"),e.next=26;break;case 21:return e.next=23,t.import(M(s));case 23:e.sent?window.localStorage.setItem("ak",s):window.alert("Input is invalid!"),h(!1);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)(f.a,{onSubmit:y,children:[Object(R.jsxs)(f.a.Group,{children:[Object(R.jsx)(f.a.Label,{children:Object(R.jsx)("b",{children:"AES KEY"})}),Object(R.jsx)(f.a.Control,{name:"aes",type:"text",className:"input",value:s,onChange:function(e){u(e.target.value),h(!0)},placeholder:"type hex key or press generate"})]}),Object(R.jsx)("br",{}),Object(R.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(R.jsx)(m.a,{name:"generate-key",variant:"primary mb-3",type:"submit",children:"Generate Key"}),"\xa0",Object(R.jsx)(m.a,{disabled:!(!!s*j),name:"import-key",variant:"primary mb-3",type:"submit",children:"Import Key"})]})]})}function D(e){var t=c.a.useState(!1),n=Object(p.a)(t,2),a=n[0],r=n[1],i=function(){var t=Object(b.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.next=3,e.onClick();case 3:r(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(R.jsx)(m.a,{variant:"primary mb-3",disabled:a,onClick:a?null:i,children:a?"Loading\u2026":e.title})}function U(e){var t=e.addPass,n=e.fetch_blockckain,a=e.save_blockckain;return Object(R.jsxs)(f.a,{children:[Object(R.jsx)(m.a,{name:"add",variant:"primary mb-3",onClick:t,children:"Add Pass"}),"\xa0",Object(R.jsx)(D,{name:"save",variant:"primary mb-3",onClick:a,title:"Save to Blockchain"}),"\xa0",Object(R.jsx)(D,{title:"Fetch Blockchain",name:"fetch",variant:"primary mb-3",onClick:n})]})}var q=new C,J=new I(window.ethereum);var H=function(){var e=c.a.useState([]),t=Object(p.a)(e,2),n=t[0],a=t[1],r=c.a.useState("loader"),i=Object(p.a)(r,2),s=i[0],o=i[1];function d(){return(d=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.init_metamask();case 2:e.sent?4!=window.ethereum.chainId?o("testnet"):o("ok"):o("metamask");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.a.useEffect((function(){void 0===window.ethereum?o("no_metamask"):(!function(){d.apply(this,arguments)}(),window.ethereum.on("accountsChanged",(function(e){e.length>0?(o("ok"),J.set_account(e[0]),O()):o("metamask")})),window.ethereum.on("chainChanged",(function(e){o(4==e?"ok":"testnet")})))}),[J]);var j=";;;",h="|||",m=function(e){return e.site+j+e.login+j+e.pass};function y(){return v.apply(this,arguments)}function v(){return(v=Object(b.a)(l.a.mark((function e(){var t,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.is_valid()){e.next=2;break}return e.abrupt("return");case 2:return(t=Object(u.a)(n)).map((function(e){return e.edit=!0})),a(t),r=n.map(m).join(h),e.next=8,q.encryptMessage(r);case 8:return c=e.sent,e.next=11,J.save(K(c));case 11:e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(l.a.mark((function e(){var t,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.is_valid()){e.next=2;break}return e.abrupt("return");case 2:return a([]),e.next=5,J.fetch();case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return",alert("blockchain data is empty!"));case 8:return e.next=10,q.decryptMessage(M(t));case 10:n=e.sent,r=["site","login","pass"],c=n.split(h).map((function(e){var t={edit:!0,visible:!1};return e.split(j).forEach((function(e,n){return t[r[n]]=e})),t})),a(c);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.is_valid()){e.next=4;break}alert("Key is invalid! Please, paste correct 256 bit key in hex, or press btn to Generate the new one"),e.next=6;break;case 4:return e.next=6,O();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.is_valid()){e.next=4;break}alert("Key is invalid! Please, paste correct 256 bit key in hex, or press btn to Generate the new one"),e.next=6;break;case 4:return e.next=6,y();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){var t=[].concat(Object(u.a)(n),[{}]);a(t)},_=function(e){var t=Object(u.a)(n);t.splice(e,1),a(t)},P=function(e){var t=Object(u.a)(n);t[e].visible=!t[e].visible,a(t)},S=function(e){var t=Object(u.a)(n);t[e].edit=!t[e].edit,a(t)},N=Object(R.jsx)("h1",{className:"text-center mb-4",children:"Please, install metamask plugin"}),E=Object(R.jsx)(f.a,{children:Object(R.jsx)("h1",{className:"text-center mb-4",children:"Please, activate metamask plugin"})}),T=Object(R.jsx)("h1",{className:"text-center mb-4",children:"Please, use Rinkeby testnet"}),A=Object(R.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"80vh"},children:Object(R.jsx)("div",{className:"spinner-grow text-primary",role:"status",style:{width:"5rem",height:"5rem"}})}),I=Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{className:"text-center mb-4",children:"Password manager"}),Object(R.jsx)(z,{addPass:C,keygen:q,fetch_blockckain:O}),Object(R.jsx)("div",{className:"pass-list",children:n.map((function(e,t){return Object(R.jsx)(x.a,{className:"pass",children:Object(R.jsx)(x.a.Body,{children:Object(R.jsx)(V,{index:t,pass:e,removePass:_,makeVisible:P,makeEditable:S},t)})})}))}),Object(R.jsx)("br",{}),Object(R.jsx)(U,{addPass:C,keygen:q,fetch_blockckain:function(){return w.apply(this,arguments)},save_blockckain:function(){return g.apply(this,arguments)}})]}),L=I;switch(s){case"no_metamask":L=N;break;case"metamask":L=E;break;case"testnet":L=T;break;case"ok":L=I;break;case"loader":L=A}return Object(R.jsx)("div",{className:"app",children:Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("br",{}),L]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,552)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(H,{})}),document.getElementById("root")),Y()}},[[537,1,2]]]);
//# sourceMappingURL=main.9fccd9ea.chunk.js.map